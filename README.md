# "we" - Development Service Runner

A **watchexec-based development runner** for uv Python services that combines the simplicity of Make with the power of systemd user services.

## Quick Start

```bash
# Generate Makefile and README for your Python project
./we . --service my-service --entry main.py --yes

# Start your service
make up

# Follow logs in real-time
make follow

# Stop service
make down
```

## Features

- **üî• Live Reload**: `RELOAD=1 make up` uses watchexec for automatic restarts
- **üìã systemd Integration**: Uses `systemd-run --user` for robust process management
- **üìä Rich Logging**: Structured logs with automatic archiving
- **üõ°Ô∏è Security**: Optional hardening with `SECURE=1`
- **üéØ Simple Interface**: Familiar Make commands for all operations

## All Commands

| Command | Description |
|---------|-------------|
| `make up` | Start service (add `RELOAD=1` for live reload) |
| `make down` | Stop service |
| `make ps` | Show service status |
| `make logs` | Show recent logs |
| `make follow` | Follow logs in real-time |
| `make restart` | Restart service |
| `make doctor` | Run service in foreground (debugging) |
| `make unit` | Show systemd unit details |
| `make journal` | Show systemd journal logs |

## Environment Variables

- `RELOAD=1` - Enable live reload with watchexec
- `SECURE=1` - Enable systemd security hardening
- `SERVICE=name` - Target specific service (multi-service projects)

## Installation

```bash
# Install to ~/.local/bin
./install.sh

# Or use directly
./we --help
```

## Architecture

**"we"** implements a **"Shell as glue, logic in Python tools"** pattern:

```
make up ‚Üí Python CLI ‚Üí systemd-run --user ‚Üí Your Service
```

- **Make**: Simple, familiar interface
- **Python CLI**: Rich error handling and structured operations  
- **systemd**: Robust process lifecycle and logging
- **uv**: Fast, reliable Python environment management

## Development

For contributors and advanced users:

```bash
# Setup development environment
make -f Makefile.dev setup-dev

# Run all quality checks
make -f Makefile.dev check

# Run tests
make -f Makefile.dev test

# Format code
make -f Makefile.dev format
```

## Requirements

- **Python 3.8+** with `uv` package manager
- **systemd** user session (Linux/WSL)
- **Make** (GNU Make)

Optional:
- **watchexec** (for live reload)
- **bats-core** (for testing)
- **pre-commit** (for development)

---

*Generated by "we" development tool - Production Ready ‚úÖ*
<!-- BEGIN: we-readme -->
# Development runner (we)

This project includes a Make block managed by the `we` tool.

Quick commands:

- make up        # start service (RELOAD=1 uses watchexec)
- make follow     # tail logs
- make down       # stop service

RELOAD=1 enables live reload via watchexec; set RELOAD=0 to disable. Set SECURE=1 to enable systemd hardening flags.

<!-- END: we-readme -->
# Test deployment
